{% extends "public/layout/layout.html" %}
{% block content %}
    {% load i18n %}
    {% load staticfiles %}

    <script src="//ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css" />

    {% block extra_head %}
        <script>

        var USERS_LIST_JSON_URL = '{% url "photo_list_json" event_url=request.session.event_url %}';

        var oLanguages = {

            "oPaginate": {
                    "first": "{% trans "First" %}",
                    "last": "{% trans "Last" %}",
                    "next": "{% trans "Next" %}",
                    "previous": "{% trans "Previous" %}"
                },
            sInfo:'{% trans "Showing _START_ to _END_ of _TOTAL_ entries" %}',
            sInfoEmpty: '{% trans "No entries to show" %}',
            sInfoFiltered: '{% trans "(filtered from _MAX_ total entries)" %}',
            sLengthMenu:'{% trans "Show _MENU_ entries per page" %}',
            sProcessing: '{% trans "Processing" %}',
            sSearch: '{% trans "Filter records:" %}',
            sZeroRecords: '{% trans "No data to show" %}'
        }






        </script>
    {% endblock %}



    <div class="wrapper">
        <div class="container padding mainContent">
            <div class="row gutters">
                <div class="col span_12">
                    <h1>SNAP HAPPY!</h1>
                    <p>This is where we’d like you to upload all your fantastic ‘KingfoPhotos’.</p>
                    <p>Funkies, Activities, Sessions or the big Friday night KingfoParty – whatever the subject, we want
                        to see them.</p>
                    <p>Once you’ve pressed ‘upload’ you might not see your pictures immediately, but worry not – we’ll
                        just be checking them over to ensure they’re good to go. To help us with this, please bear in
                        mind your audience – if you don’t think your colleagues should see it, don’t post it!</p>
                    <p>Right, grab that smartphone and get snapping!</p>
                </div>
            </div>
            <div class="row gutters">
                <div class="col span_12">
                    <form action="{% url 'photo-reel' event_url=request.session.event_url %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col span_6">
                                <p><input type="file" name="pic" accept="image/*"/></p>
                            </div>
                            <div class="col span_6">
                                <button class="button round color2">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>
                {% if messages %}
                    {% for message in messages %}
                        <div hidden id="msg">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
{#        <div class="row blackBackground">#}
{#            {% for photo in photos %}#}
{##}
{#                {% if forloop.first %}#}
{#                    <div class="row gutters">#}
{#                        {% elif forloop.counter0|divisibleby:"3" and not forloop.first %}#}
{#                    </div>#}
{#                    <div class="row gutters">#}
{#                {% endif %}#}
{##}
{#            <div class="col span_4">#}
{#                <a class="fancybox-thumbs" data-fancybox-group="thumb" href="{% static photo.photo %}">#}
{#                    <img src="{% static photo.thumb_image %}" alt=""/>#}
{#                </a>#}
{#            </div>#}
{##}
{#            {% if forloop.last %}#}
{#                </div>#}
{#            {% endif %}#}
{#            {% endfor %}#}
{#        </div>#}
{#        <div class="row" style="text-align: center !important; margin-top: 10px;">#}
{#            <span class="step-links">#}
{#            {% if photos.has_previous %}#}
{#                <a href="?page={{ photos.previous_page_number }}" class="button round small">previous</a>#}
{#            {% endif %}#}
{##}
{#                <span class="current">#}
{#                Page {{ photos.number }} of {{ photos.paginator.num_pages }}.#}
{#            </span>#}
{##}
{#                {% if photos.has_next %}#}
{#                    <a href="?page={{ photos.next_page_number }}" class="button round small">next</a>#}
{#                {% endif %}#}
{#            </span>#}
{#        </div>#}




    <div >
        <table class="photo-datatable">
            <thead>
                <th>{% trans "photo" %}</th>
            </thead>
            <tbody>
            </tbody>
        </table>

    </div>


        <script>
            $(document).ready(function() {

             $('.photo-datatable').dataTable({
                "oLanguage": oLanguages,
                "bFilter": false,
                "aLengthMenu": [[1, 3, 6, 12, 30], [1, 3, 6, 12, 30]],
                "iDisplayLength" : 3,
                "aaSorting": [[ 0, "desc" ]],
                "bAutoWidth": true,
                 "aoColumnDefs": [
                    {
                        "aTargets": [0],
                        "mRender": function (data, type, full, meta) {
                            return '<a class="fancybox-thumbs" data-fancybox-group="thumb" href="'+ data.photo + '"><img src="'+data.thumb+'" /></a>';
                        }
                    }
                ],
{#                "aoColumns": [#}
{#                                { "bSortable": true, "bSearchable": true, "sClass": "center" }#}
{#                                ],#}
                "bProcessing": true,
                "sPaginationType": "full_numbers",
                "bServerSide": true,
                "bStateSave": true,
                "sAjaxSource": USERS_LIST_JSON_URL
            });


        });
        </script>



    </div>


    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="{% static 'assets/javascripts/fancybox//jquery.fancybox.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'assets/javascripts/fancybox/jquery.fancybox.css' %}"
          media="screen"/>
    <!-- Add Thumbnail helper (this is optional) -->
    <link rel="stylesheet" type="text/css"
          href="{% static 'assets/javascripts/fancybox/jquery.fancybox-thumbs.css' %}"/>
    <script type="text/javascript"
            src="{% static 'assets/javascripts/fancybox/jquery.fancybox-thumbs.js' %}"></script>

    <script>


        $('.fancybox-thumbs').fancybox({
            prevEffect: 'none',
            nextEffect: 'none',

            closeBtn: true,
            arrows: true,
            nextClick: true,


            helpers: {
                thumbs: {
                    width: 50,
                    height: 50
                }
            }
        });
        $(function () {
            var msg = $("#msg").html();
            if (msg) {
                if (msg.split(" ")[0] == 'Your')
                    $.growl.notice({message: msg});
                else
                    $.growl.error({message: msg});
            }
        });
    </script>


    <style>
     .photo-datatable tbody tr {
         width: 32%;
         float: left;
         height:300px;

     }

     .photo-datatable tbody tr td img{
         width: 100%;
         height: 300px;

     }

    .dataTables_length{
        margin-bottom: 10px;
    }

    .dataTables_info{
        margin-top: 12px;
        margin-bottom: 5px;
    }
    .dataTables_paginate, .paging_full_numbers{
        margin-top: 12px;
        margin-bottom: 5px;
    }

    </style>


{% endblock %}